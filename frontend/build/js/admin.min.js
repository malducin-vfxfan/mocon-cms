$(document).ready(function(){function uploadFiles(files,base,controller,id,uploadType,options){for(var formData=new FormData,i=0;i<files.length;i++)formData.append("file-"+i,files[i]);formData.append("options",JSON.stringify(options)),$.ajax({url:base+"/admin/"+controller+"/ajaxUploadFiles/"+id+"/"+uploadType,type:"POST",data:formData,async:!1,success:function(){location.reload(!0)},cache:!1,contentType:!1,processData:!1})}$("#add-page-section").click(function(){var num=$(".page-section").length,namePrefix="data[PageSection]",idPrefix="PageSection",idPageSection="page-section-",newPageSection=$("#page-section-0").clone();$(newPageSection).attr("id",idPageSection+num),$(newPageSection).find("label[for=PageSection0Title]").attr("for",idPrefix+num+"Title"),$(newPageSection).find("#PageSection0Title").attr("name",namePrefix+"["+num+"][title]").attr("id",idPrefix+num+"Title"),$(newPageSection).find("label[for=PageSection0Section]").attr("for",idPrefix+num+"Section"),$(newPageSection).find("#PageSection0Section").attr("name",namePrefix+"["+num+"][section]").attr("id",idPrefix+num+"Section"),$(newPageSection).find("label[for=PageSection0Content]").attr("for",idPrefix+num+"Content"),$(newPageSection).find("#PageSection0Content").attr("name",namePrefix+"["+num+"][content]").attr("id",idPrefix+num+"Content"),$("div#extra-page-sections").append(newPageSection),$("div#extra-page-sections").append("<hr>"),5===num&&$("#add-page-section").attr("disabled","disabled")}),$(".menu-page-slug").click(function(){var slug=$(this).attr("id");$("#MenuLink").val("/pages/view/"+slug)}),$("#dropzone-files, #dropzone-images, #dropzone-preview-images, #dropzone-album, #dropzone-album-thumbnails").on("dragover",function(e){$(this).attr("class","dropzone drop"),e.preventDefault(),e.stopPropagation()}),$("#dropzone-files, #dropzone-images, #dropzone-preview-images, #dropzone-album, #dropzone-album-thumbnails").on("dragleave",function(e){$(this).attr("class","dropzone"),e.preventDefault(),e.stopPropagation()}),$("#dropzone-files, #dropzone-images, #dropzone-preview-images, #dropzone-album, #dropzone-album-thumbnails").on("drop",function(e){$(this).attr("class","dropzone"),e.preventDefault(),e.stopPropagation(),e.originalEvent.dataTransfer&&e.originalEvent.dataTransfer.files.length&&uploadFiles(e.originalEvent.dataTransfer.files,$(this).data("base"),$(this).data("controller"),$(this).data("id"),$(this).data("upload-type"),$(this).data("options"))})});